<!doctype html>
<html  th:lang="${#locale.language}"  xmlns:th="http://www.thymeleaf.org" >
<!-- title-->
<title>To Do</title>
<!-- favicon -->



<meta charset="utf-8" />

<!-- responsive design -->
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">


<!-- Google Fonts-->
<link href="https://fonts.googleapis.com/css2?family=Crimson+Text&family=Quicksand:wght@300&display=swap"
      rel="stylesheet">

<!-- Font awesome-->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css" />

<!-- Bootstrap CSS v5.0.2 -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css">

<!-- jquery UI -->
<link rel="stylesheet" href="//code.jquery.com/ui/1.13.1/themes/base/jquery-ui.css">
<script src="https://code.jquery.com/jquery-3.6.0.js"></script>
<script src="https://code.jquery.com/ui/1.13.1/jquery-ui.js"></script>
<style>
    input[type=checkbox]:checked + label.strikethrough{
        text-decoration: line-through;
    }

    .btn-xl {
        padding: 10px 120px;
        font-size: 21px;

    }
    .btn-dl{
        padding: 10px 60px;
        font-size: 13px;
    }
</style>
</head>

<body class="container bg-light text-white">
<!-- start codes -->

<h2 class="display-4 text-uppercase text-center mt-5 mb-4" style="color:steelblue">To Do List</h2>

<p class="display-7 mt-7 mb-7" style="color:#070505 "> Add New Task  </p>

<form th:action="@{/save}" method="post" th:object="${todo_key}">

    <input type="text" class="form-control mb-2" id="doName"    th:field="*{doName}"    required placeholder="New Task" autofocus/>
    <div th:if="${#fields.hasErrors('doName')}" th:errors="*{doName}"   class="text-danger"></div>
    <br>
    <div class="text-center">
    <button  class="btn btn-primary btn-xl ">Add New Task</button>
    </div>
</form>

<br><br>
<div class="container" style="display: flex; justify-content: space-between">
<div style="text-align: left" >
<a th:href="@{/delete/do/all}"  th:data-confirm-delete="|Are you sure you want to delete all tasks?|"
     onclick="if (!confirm(this.getAttribute('data-confirm-delete'))) return false">
    <button  class="btn btn-danger btn-dl">Delete All Tasks</button>
</a>
</div>
<div style="text-align: right" >
    <a th:href="@{/done/delete/all}"  th:data-confirm-delete="|Are you sure you want to delete all tasks?|"
       onclick="if (!confirm(this.getAttribute('data-confirm-delete'))) return false">
        <button  class="btn btn-danger btn-dl ">Delete All Done Tasks</button>
    </a>
</div>
</div>

<br>




<table class="table  table-hover table-bordered table-striped table-responsive ">
    <thead>
    <tr>

        <th>Task Name</th>
        <th>Created Date</th>
        <th>Update Task</th>
        <th>Delete Task</th>

    </tr>
    </thead>
    <tbody>
    <tr th:each="row: ${todo_list}" >

    <td>
        <div class="col-md-5">
            <form th:action="@{/done/{id}(id=${row.id})}" method="get" >
            <div class="checkbox">
                <input type="checkbox" id="packers" name="packersOff" class="toggle" value="1" onchange="this.form.submit()" th:checked="${row.completed}" >
                <label for="packers" class="strikethrough" th:text="${row.doName}"></label>
            </div>
            </form>
        </div>
        </td>
        <td th:text="${row.createdDate}"></td>

        <td>
             <button th:attr="data-bs-target=${'#editModal'+row.id}"  data-row="${row}" data-bs-toggle="modal"  type="button"
                     class="btn btn-link px-3 me-2">

            <i  class="fa fa-pencil" aria-hidden="true" style="color:#0ab90b"></i>
        </button>

        <div th:each="row: ${row}"  th:attr="id=${'editModal' + row.id}"  class="modal fade"  tabindex="-1" role="dialog"   aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" style="color:#3f5e06 "> Update Task </h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal"  aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <form method="post" th:action="@{/update/do/{id}(id=${row.id})}" th:object="${todo_key}">
                            <div class="form-outline mb-4">
                                <div class="container">
                                    <div class="row">

                                        <div class="col"><p style="color:black" class="mb-4 mt-3">Enter Updated Task</p>
                                            <input type="text" class="form-control mb-4" id="NewdoName"    th:field="*{doName}"    required placeholder="Updated Task" autofocus/>
                                            <div th:if="${#fields.hasErrors('doName')}" th:errors="*{doName}"   class="text-danger"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>


                            <div class="mt-3 mb-3">
                                <button type="reset" class="btn btn-danger btn-block ">Temizle</button>
                                <button style="text-align: right;" type="submit" class="btn btn-primary  ">Update</button>
                            </div>
                        </form>
                </div>
            </div>
        </div>
        </div>
        </td>
        <td><a th:href="@{/delete/do/{id}(id=${row.id})}"  th:data-confirm-delete="|Are you sure you want to delete this task ${row.doName}?|"
               onclick="if (!confirm(this.getAttribute('data-confirm-delete'))) return false"><i class="fa-regular fa-trash-can text-danger"></i></a>
        </td>

      </tr>
    </tbody>
</table>


<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"></script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.bundle.min.js" integrity="sha384-pprn3073KE6tl6bjs2QrFaJGz5/SUsLqktiwsUTF55Jfv3qYSDhgCecCxMW52nD2" crossorigin="anonymous"></script>

</body>

</html>